<!DOCTYPE html>
<html lang="uk" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–ê–≤—Ç–æ–ø–∞—Ä–∫ - –ê–¥–º—ñ–Ω –ü–∞–Ω–µ–ª—å</title>
    <link rel="stylesheet" th:href="@{/styles/client-styles.css}" />
    <link rel="stylesheet" th:href="@{/styles/admin.css}" />
    <style>
        /* –°—Ç–∏–ª—ñ —Å—Ç–∞—Ç—É—Å—ñ–≤ –º–∞—à–∏–Ω */
        .car-status {
            padding: 5px 12px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 12px;
            text-transform: uppercase;
        }
        .status-free { background: #e8f5e9; color: #2e7d32; } /* –ó–µ–ª–µ–Ω–∏–π */
        .status-busy { background: #ffebee; color: #c62828; } /* –ß–µ—Ä–≤–æ–Ω–∏–π */
        .status-broken { background: #eceff1; color: #546e7a; } /* –°—ñ—Ä–∏–π */

        .add-car-form {
            background: #FAFAFA;
            padding: 20px;
            border-radius: 12px;
            border: 2px dashed #E0E0E0;
            display: flex;
            gap: 15px;
            align-items: end;
            margin-bottom: 30px;
        }
        .form-col { flex: 1; display: flex; flex-direction: column; gap: 5px; }
        .form-col label { font-size: 12px; font-weight: bold; color: #555; }
        .form-col input {
            padding: 10px; border-radius: 8px; border: 1px solid #ddd; width: 100%; box-sizing: border-box;
        }
    </style>
</head>
<body>

<header class="header">
    <div class="logo"><a th:href="@{/}"><img th:src="@{/images/Logo.svg}" alt="" /></a></div>
    <nav class="header-navigation">
        <a th:href="@{/admin-crud}" style="color: #193948;">–¢–æ–≤–∞—Ä–∏</a>
        <a th:href="@{/admin/orders}" style="color: #193948;">–ó–∞–º–æ–≤–ª–µ–Ω–Ω—è</a>
        <a th:href="@{/admin/cars}" style="font-weight: bold; color: #6a4821;">–ê–≤—Ç–æ–ø–∞—Ä–∫</a>
        <a th:href="@{/admin/stats}" style="color: #193948;">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</a>
    </nav>
    <div class="header-user-actions">
        <svg class="ham hamRotate ham7" viewBox="0 0 100 100"  onclick="toggleMobileMenu()" id="burger-btn">
            <path
                    class="line top"
                    d="m 70,33 h -40 c 0,0 -6,1.368796 -6,8.5 0,7.131204 6,8.5013 6,8.5013 l 20,-0.0013" />
            <path
                    class="line middle"
                    d="m 70,50 h -40" />
            <path
                    class="line bottom"
                    d="m 69.575405,67.073826 h -40 c -5.592752,0 -6.873604,-9.348582 1.371031,-9.348582 8.244634,0 19.053564,21.797129 19.053564,12.274756 l 0,-40" />
        </svg>
        <span style="font-weight: bold;cursor:auto;">–ê–¥–º—ñ–Ω –ü–∞–Ω–µ–ª—å</span>

    </div>
    <div id="mobileMenu">
        <div class="mobile-menu-content">
            <nav class="mobile-header-navigation">
                <a th:href="@{/admin-crud}" style="font-weight: bold;">–¢–æ–≤–∞—Ä–∏</a>
                <a th:href="@{/admin/orders}">–ó–∞–º–æ–≤–ª–µ–Ω–Ω—è</a>
                <a th:href="@{/admin/cars}" style="color: #6a4821;">–ê–≤—Ç–æ–ø–∞—Ä–∫</a>
                <a th:href="@{/admin/stats}">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</a>
                <a href="#" onclick="logout()" style="color: red; text-decoration: none;">–í–∏—Ö—ñ–¥</a>
            </nav>
        </div>
    </div>
</header>

<main class="conteiner" style="display:flex; flex-direction:column; justify-content:start;">
    <h2 style="margin-top: 30px;"> –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ú–∞—à–∏–Ω–∞–º–∏</h2>

    <form class="add-car-form" onsubmit="addCar(event)">
        <div class="form-col">
            <label>–ú–∞—Ä–∫–∞ –∞–≤—Ç–æ</label>
            <input type="text" id="model" placeholder="Daewoo Lanos" required>
        </div>
        <div class="form-col">
            <label>–ù–æ–º–µ—Ä–Ω–∏–π –∑–Ω–∞–∫</label>
            <input type="text" id="license" placeholder="AA 1234 BB" required>
        </div>
        <div class="form-col">
            <label>–Ü–º'—è –≤–æ–¥—ñ—è (–õ–æ–≥—ñ–Ω –∞–±–æ ID)</label>
            <input type="text" id="driver" placeholder="driver1" required>
        </div>
        <button type="submit" class="btn-create-new" style="margin: 0; padding: 10px 20px; font-size: 14px;">+ –î–æ–¥–∞—Ç–∏</button>
    </form>

    <table class="orders-table">
        <thead>
        <tr>
            <th>ID</th>
            <th>–ê–≤—Ç–æ–º–æ–±—ñ–ª—å</th>
            <th>–ù–æ–º–µ—Ä</th>
            <th>–í–æ–¥—ñ–π</th>
            <th>–°—Ç–∞—Ç—É—Å</th>
            <th>–î—ñ—ó</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="car : ${cars}">
            <td th:text="${car.id}">1</td>
            <td th:text="${car.model}" style="font-weight: bold;">Toyota Prius</td>
            <td th:text="${car.licensePlate}">KA 7777 AH</td>

            <td th:text="${car.driver != null ? car.driver.name : '‚Äî'}">–Ü–≤–∞–Ω</td>

            <td>
                <span class="car-status status-free" th:if="${car.status.name() == 'free'}"> –í—ñ–ª—å–Ω–∞</span>
                <span class="car-status status-busy" th:if="${car.status.name() == 'busy'}"> –ó–∞–π–Ω—è—Ç–∞</span>
                <span class="car-status status-broken" th:if="${car.status.name() == 'at_repairs'}"> –†–µ–º–æ–Ω—Ç</span>
            </td>
            <td>
                <button class="btn-admin btn-delete"
                        style="width: auto; padding: 5px 10px;"
                        th:onclick="'deleteCar(' + ${car.id} + ')'">
                    üóë
                </button>
            </td>
        </tr>
        <tr th:if="${#lists.isEmpty(cars)}">
            <td colspan="6" style="text-align: center; padding: 20px;">–ú–∞—à–∏–Ω —â–µ –Ω–µ–º–∞—î.</td>
        </tr>
        </tbody>
    </table>
</main>
<script th:src="@{/js/admin.js}"></script>
<script th:src="@{/js/client.js}"></script>
</body>
</html>